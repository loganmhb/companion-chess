// Generated by CoffeeScript 1.10.0
(function() {
  define(["jquery"], function($) {
    var computerMoveBtn, fenEl, newgame, pgnEl, sideSelector, statusEl;
    statusEl = $('#status');
    pgnEl = $('#pgn');
    fenEl = $('#fen');
    computerMoveBtn = $('#move');
    newgame = $('#newgame');
    sideSelector = $("#sideSelector");
    return function(game, eventHandler) {
      newgame.click(function(event) {
        return eventHandler({
          type: "newgame",
          playerSide: sideSelector.val()
        });
      });
      return {
        updateStatus: function(game) {
          var moveColor, status;
          if (game.turn() === 'w') {
            moveColor = 'White';
          } else {
            moveColor = 'Black';
          }
          if (game.in_checkmate()) {
            status = 'Game over, #{moveColor} is in checkmate.';
          } else if (game.in_draw()) {
            status = 'Game over, drawn position.';
          } else {
            status = moveColor + ' to move.';
            if (game.in_check()) {
              status += ' In check.';
            }
          }
          statusEl.html(status);
          fenEl.html(game.fen());
          console.log(game.pgn());
          return pgnEl.html(game.pgn());
        }
      };
    };
  });

}).call(this);
